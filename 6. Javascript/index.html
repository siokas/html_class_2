<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TEST</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="css/style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="navbar">
      <h1 class="title" id="title">QGme</h1>
      <div class="nav-links-container">
        <a class="navlink" href="index.html">Αρχική</a>
        <a class="navlink" href="about.html">Σχετικά</a>
        <a class="navlink" href="contact.html">Επικοινωνία</a>
      </div>
    </div>
    <div class="container">
      <div class="score-board">Score: <span id="score">0</span></div>
      <div class="score-board">
        Ερώτηση: <span id="question-number">1</span>
      </div>
      <div id="question" class="question"></div>
      <div id="message" class="message"></div>
      <div id="wiki" class="wiki"></div>
      <div class="buttons">
        <button id="btn-true" class="btn btn-true" onclick="answerButton(true)">
          ΣΩΣΤΟ
        </button>
        <button
          id="btn-false"
          class="btn btn-false"
          onclick="answerButton(false)"
        >
          ΛΑΘΟΣ
        </button>
      </div>

      <div class="btn-next-container">
        <button
          class="btn btn-next"
          id="btn-next"
          hidden="true"
          onclick="nextQuestion()"
        >
          Επόμενη Ερώτηση
        </button>
        <button
          class="btn btn-restart"
          id="btn-restart"
          hidden="true"
          onclick="restartGame()"
        >
          Restart Game
        </button>
      </div>
    </div>

    <script src="js/questions.js"></script>
    <script>
      var question = document.getElementById("question");
      var message = document.getElementById("message");
      var wiki = document.getElementById("wiki");
      var btnTrue = document.getElementById("btn-true");
      var btnFalse = document.getElementById("btn-false");
      var btnNext = document.getElementById("btn-next");
      var btnRestart = document.getElementById("btn-restart");
      var scoreText = document.getElementById("score");
      var questionNumberText = document.getElementById("question-number");

      var questionNumber = 0;
      var score = 0;
      var standarQuestions = questions.length;
      var maxQuestions = questions.length;
      var random = Math.floor(Math.random() * maxQuestions);

      renderRandomQuestion();

      function renderRandomQuestion() {
        maxQuestions = questions.length;
        random = Math.floor(Math.random() * maxQuestions);
        console.log(random);
        console.log(questions);
        question.innerHTML = questions[random].question;
      }

      function renderQuestion() {
        question.innerHTML = questions[questionNumber].question;
      }

      function nextQuestion() {
        questions.splice(random, 1);
        wiki.innerHTML = "";
        if (questionNumber < maxQuestions) {
          questionNumber++; // questionNumber = questionNumber + 1;
          renderRandomQuestion();
          question.style.backgroundColor = "white";
          message.innerHTML = "";
          btnNext.hidden = true;
          btnTrue.disabled = false;
          btnFalse.disabled = false;
          btnTrue.style.border = "none";
          btnFalse.style.border = "none";
          questionNumberText.innerHTML = questionNumber + 1;
        } else {
          gameover();
        }
      }

      function gameover() {
        btnNext.hidden = true;
        btnTrue.hidden = true;
        btnFalse.hidden = true;
        btnRestart.hidden = false;
        message.hidden = true;
        question.style.backgroundColor = "white";
        question.innerHTML =
          "Από τις " +
          maxQuestions +
          " ερωτήσεις απάντησες σωστά στις " +
          score;
      }

      function answerButton(answer) {
        btnNext.hidden = false;
        if (answer == questions[questionNumber].answer) {
          question.style.backgroundColor = "green";
          message.style.color = "green";
          message.innerHTML = "Η απάντησή σας είναι ΣΩΣΤΗ!";
          btnFalse.style.border = "5px solid black";
          btnTrue.disabled = true;
          btnFalse.disabled = true;
          score++;
          scoreText.innerHTML = score;
        } else {
          question.style.backgroundColor = "red";
          message.style.color = "red";
          message.innerHTML = "Η απάντησή σας είναι ΛΑΘΟΣ!";
          btnTrue.style.border = "5px solid black";
          btnTrue.disabled = true;
          btnFalse.disabled = true;
        }

        if (questions[questionNumber].wiki) {
          wiki.innerHTML = questions[questionNumber].wiki;
        }
      }

      function restartGame() {
        // window.location = "./index.html";
        btnRestart.hidden = true;
        btnTrue.hidden = false;
        btnFalse.hidden = false;
        btnTrue.disabled = false;
        btnFalse.disabled = false;
        btnTrue.style.border = "none";
        btnFalse.style.border = "none";
        questionNumber = 0;
        renderRandomQuestion();
        score = 0;
        scoreText.innerHTML = 0;
        questionNumberText.innerHTML = 1;
      }
    </script>
  </body>
</html>
